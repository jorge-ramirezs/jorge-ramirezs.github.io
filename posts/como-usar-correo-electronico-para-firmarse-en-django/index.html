<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django - Linux Fácil</title><meta name="author" content="">
<meta name="author-link" content="">
<meta name="description" content="Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy." /><meta name="keywords" content='django, python, desarrollo' /><meta itemprop="name" content="Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django">
<meta itemprop="description" content="Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy."><meta itemprop="datePublished" content="2022-10-29T15:31:06-05:00" />
<meta itemprop="dateModified" content="2024-01-06T23:32:59-06:00" />
<meta itemprop="wordCount" content="780">
<meta itemprop="keywords" content="django,python,desarrollo," /><meta property="og:title" content="Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django" />
<meta property="og:description" content="Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/como-usar-correo-electronico-para-firmarse-en-django/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-29T15:31:06-05:00" />
<meta property="article:modified_time" content="2024-01-06T23:32:59-06:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django"/>
<meta name="twitter:description" content="Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy."/>
<meta name="twitter:site" content="@JorgeRS"/>
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="http://localhost:1313/posts/como-usar-correo-electronico-para-firmarse-en-django/" /><link rel="prev" href="http://localhost:1313/posts/que-es-appimage-y-como-usarla/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django",
    "inLanguage": "en",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/posts\/como-usar-correo-electronico-para-firmarse-en-django\/"
    },"genre": "posts","keywords": "django, python, desarrollo","wordcount":  780 ,
    "url": "http:\/\/localhost:1313\/posts\/como-usar-correo-electronico-para-firmarse-en-django\/","datePublished": "2022-10-29T15:31:06-05:00","dateModified": "2024-01-06T23:32:59-06:00","license": "©{year}, All Rights Reserved","publisher": {
      "@type": "Organization",
      "name": ""},"author": {
        "@type": "Person",
        "name": "Jorge R"
      },"description": "Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy."
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="Linux Fácil"><span class="header-title-text">Linux Fácil</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="https://www.youtube.com/channel/UCkns-R5bBW3snQx7RAYRX-A"
                
                rel="noopener noreferrer" target="_blank"
              ><i class="fa-brands fa-youtube fa-fw fa-sm" aria-hidden="true"></i> YouTube</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/archives/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archivo</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categorias</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="Cambia el tema">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="Linux Fácil"><span class="header-title-text">Linux Fácil</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="https://www.youtube.com/channel/UCkns-R5bBW3snQx7RAYRX-A"
                  
                  rel="noopener noreferrer" target="_blank"
                ><i class="fa-brands fa-youtube fa-fw fa-sm" aria-hidden="true"></i> YouTube</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/archives/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> Archivo</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> Categorias</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> Tags</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="Cambia el tema"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=""></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      Jorge R</span></span><span class="post-included-in">&nbsp;incluido en <a href="/categories/django/" class="post-category" title="Categoría - Django"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Django</a></span></div><div class="post-meta-line"><span title="publicado el 2022-10-29 15:31:06"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2022-10-29">2022-10-29</time></span>&nbsp;<span title="Actualizado el 2024-01-06 23:32:59"><i class="fa-regular fa-calendar-check fa-fw me-1" aria-hidden="true"></i><time datetime="2024-01-06">2024-01-06</time></span>&nbsp;<span title="780 palabras"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>Aproximadamente 800 palabras</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>4 minutos</span>&nbsp;</div>
    </div><div class="featured-image"><img loading="lazy" src="/images/posts/banners/Django-Python.png" alt="/images/posts/banners/Django-Python.png" data-title="Django por defecto tiene uno de los mejores sistemas de autenticación que conosco, la única desventaja es que no tiene la opción de utilizar la cuenta de correo electrónico para firmarse en vez de un usuario y contraseña, en este artículo te voy a enseñar la solución que yo utilizo y que me ha servido hasta hoy." style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>Contenido</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-instala-django">1. Instala Django</a></li>
    <li><a href="#2-crea-la-app-users">2. Crea La App Users</a></li>
    <li><a href="#3-modifica-el-archivo-usersmodelspy">3. Modifica El Archivo users/models.py</a></li>
    <li><a href="#4-modifica-settingspy">4. Modifica Settings.py</a></li>
    <li><a href="#5-agrega-el-nuevo-modelo-a-la-consola-de-administración">5. Agrega el nuevo modelo a la consola de administración</a></li>
    <li><a href="#6-crea-las-tablas">6. Crea Las Tablas</a></li>
    <li><a href="#7-crea-el-superusuario">7. Crea El Superusuario</a></li>
    <li><a href="#8-prueba-la-configuración">8. Prueba La Configuración</a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><!-- Content -->
<h1 id="youtube-video" class="heading-element">
  <a href="#youtube-video" class="heading-mark"></a>YouTube Video:</h1>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube-nocookie.com/embed/111111111" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h1 id="instrucciones" class="heading-element">
  <a href="#instrucciones" class="heading-mark"></a>Instrucciones:</h1><h2 id="1-instala-django" class="heading-element">
  <a href="#1-instala-django" class="heading-mark"></a>1. Instala Django</h2><p>Obviamente lo primero que vamos a hacer es instalar Django, al día de hoy que estoy escribiendo este artículo la versión es 4.1.2.</p>
<p>Vamos entonces a crear un directorio, después creamos un ambiente virtual utilizando <strong>pipenv</strong>, instalamos django y creamos el proyecto.</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mkdir my_project <span class="o">&amp;&amp;</span> <span class="nb">cd</span> my_project
</span></span><span class="line"><span class="cl">$ pipenv install django~<span class="o">=</span>4.1.2
</span></span><span class="line"><span class="cl">$ pipenv shell
</span></span><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ django-admin startproject auth .
</span></span><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py runserver</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ATENCIÓN:</strong></p>
<blockquote>
<p>Es muy importante que no ejecutes los comandos &ldquo;makemigrations&rdquo; o &ldquo;migrate&rdquo; antes de completar todos los pasos descritos en este artículo.</p>
</blockquote>
<p>Si todo sale como lo planeamos, lo siguiente es dar clic en la liga que aparece en la terminal o también puedes abrir un navegador e ir a <a href="http://127.0.0.1:8000/"target="_blank" rel="external nofollow noopener noreferrer">http://127.0.0.1:8000/</a> en donde debe aparecer la página de bienvenida de Django.</p>
<p><img loading="lazy" src="/images/posts/django-email-login/django-bienvenida.png" alt="Pagina de Bienvenida de Django" srcset="/images/posts/django-email-login/django-bienvenida.png?size=small, /images/posts/django-email-login/django-bienvenida.png?size=medium 1.5x, /images/posts/django-email-login/django-bienvenida.png?size=large 2x" sizes="auto" data-title="Pagina de Bienvenida de Django" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p>Para detener el servidor presiona <code>Ctrl + c</code> en la terminal.</p>
<h2 id="2-crea-la-app-users" class="heading-element">
  <a href="#2-crea-la-app-users" class="heading-mark"></a>2. Crea La App Users</h2><p>Django viene por defecto con un modelo de usuario que es el que utiliza para la autenticación.
Nosotros vamos a modificar este modelo creando uno propio que nos permita utilizar la cuenta de <strong>Correo Electronico</strong> en vez de un <strong>Nombre de Usuario</strong>.</p>
<p>Ahora es momento de crear una app en la cual vamos a modificar el modelo de usuario que viene por defecto con Django.</p>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py startapp users</span></span></code></pre></td></tr></table>
</div>
</div><p>Una vez creada la app, no te olvides de agregarla en INSTALLED<em>APPS en el archivo _settings.py</em></p>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-settings.py" data-lang="settings.py"><span class="line"><span class="cl"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># other apps</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;users&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-modifica-el-archivo-usersmodelspy" class="heading-element">
  <a href="#3-modifica-el-archivo-usersmodelspy" class="heading-mark"></a>3. Modifica El Archivo users/models.py</h2><p>A continuación agrega el siguiente codigo al archivo <em>users/model.py</em>. Esto es necesario para hacer &ldquo;email&rdquo; el campo por defecto en vez de &ldquo;username&rdquo;.</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-users/models.py" data-lang="users/models.py"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">AbstractBaseUser</span><span class="p">,</span> <span class="n">PermissionsMixin</span><span class="p">,</span> <span class="n">BaseUserManager</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomUserManager</span><span class="p">(</span><span class="n">BaseUserManager</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">is_email_verified</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_fields</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Email must be provided&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Password must be provided&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">email</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">normalize_email</span><span class="p">(</span><span class="n">email</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">first_name</span><span class="o">=</span><span class="n">first_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">last_name</span><span class="o">=</span><span class="n">last_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">is_email_verified</span><span class="o">=</span><span class="n">is_email_verified</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="o">**</span><span class="n">extra_fields</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">user</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">is_email_verified</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_fields</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_fields</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&#34;is_staff&#34;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_fields</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&#34;is_superuser&#34;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_user</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">is_email_verified</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_fields</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">create_superuser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">is_email_verified</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_fields</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_fields</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&#34;is_staff&#34;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">extra_fields</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&#34;is_superuser&#34;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">extra_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;is_staff&#34;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Superuser must have is_staff=True.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">extra_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;is_superuser&#34;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&#34;Superuser must have is_superuser=True.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_user</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">is_email_verified</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_fields</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">AbstractBaseUser</span><span class="p">,</span> <span class="n">PermissionsMixin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">(</span><span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">254</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">240</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_email_verified</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">is_staff</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Required</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">is_superuser</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">objects</span> <span class="o">=</span> <span class="n">CustomUserManager</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">USERNAME_FIELD</span> <span class="o">=</span> <span class="s1">&#39;email&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">REQUIRED_FIELDS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">,</span> <span class="s1">&#39;is_email_verified&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s1">&#39;User&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;Users&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-modifica-settingspy" class="heading-element">
  <a href="#4-modifica-settingspy" class="heading-mark"></a>4. Modifica Settings.py</h2><p>Ahora es momento de decirle a Django que utilice nuestro modelo como modelo para la autenticación de los usuarios. Agrega el siguiente codigo al archivo <em>settings.py</em></p>
<div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-settings.py" data-lang="settings.py"><span class="line"><span class="cl"><span class="n">AUTH_USER_MODEL</span> <span class="o">=</span> <span class="s1">&#39;users.User&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-agrega-el-nuevo-modelo-a-la-consola-de-administración" class="heading-element">
  <a href="#5-agrega-el-nuevo-modelo-a-la-consola-de-administraci%c3%b3n" class="heading-mark"></a>5. Agrega el nuevo modelo a la consola de administración</h2><p>Como modificamos el modelo del usuario que viene por defecto en Django, ahora lo que debemos hacer es agregar el nuevo modelo a la consola de administración, para eso debemos agregar lo siguiente al archivo <em>&ldquo;users/admin.py&rdquo;</em></p>
<div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-users/admin.py" data-lang="users/admin.py"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">User</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">CustomUserAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;email&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># &#39;first_name&#39;,</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># &#39;last_name&#39;,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;is_email_verified&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;is_staff&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;is_active&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;is_staff&#39;</span><span class="p">,</span> <span class="s1">&#39;is_email_verified&#39;</span><span class="p">,)</span>
</span></span><span class="line"><span class="cl">    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;first_name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;last_name&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;password&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;groups&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}),</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="s1">&#39;Permissions&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;user_permissions&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;is_email_verified&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;is_staff&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;is_active&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;is_superuser&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">CustomUserAdmin</span><span class="p">)</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6-crea-las-tablas" class="heading-element">
  <a href="#6-crea-las-tablas" class="heading-mark"></a>6. Crea Las Tablas</h2><p>A continuación actualiza las tablas en la base de datos corriendo los comandos <em>makemigrations</em> y <em>migrate</em> de la siguiente manera:</p>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py makemigrations
</span></span><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py migrate</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="7-crea-el-superusuario" class="heading-element">
  <a href="#7-crea-el-superusuario" class="heading-mark"></a>7. Crea El Superusuario</h2><p>Luego vamos a crear el superusuario con el siguiente comando:</p>
<div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py createsuperuser
</span></span><span class="line"><span class="cl">Email: jorge@linuxfacil.mx
</span></span><span class="line"><span class="cl">First name: Jorge
</span></span><span class="line"><span class="cl">Last name: Ramirez
</span></span><span class="line"><span class="cl">Is email verified: True
</span></span><span class="line"><span class="cl">Password:
</span></span><span class="line"><span class="cl">Password <span class="o">(</span>again<span class="o">)</span>:
</span></span><span class="line"><span class="cl">Superuser created successfully.</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="8-prueba-la-configuración" class="heading-element">
  <a href="#8-prueba-la-configuraci%c3%b3n" class="heading-mark"></a>8. Prueba La Configuración</h2><p>Por último vamos a correr el servidor y entrar a la consola de administración.
Ejecuta el servidor usando</p>
<div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">(</span>my_project<span class="o">)</span>$ python manage.py runserver</span></span></code></pre></td></tr></table>
</div>
</div><p>Y en tu navegador abre la siguiente dirección: <a href="http://127.0.0.1:8000/admin/"target="_blank" rel="external nofollow noopener noreferrer">http://127.0.0.1:8000/admin/</a></p>
<p>Ingresa el correo electrónico y el password del superusuario</p>
<p>Y listo.</p></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="Actualizado el 2024-01-06 23:32:59">Actualizado el 2024-01-06&nbsp;</span>
      </div><div class="post-info-license">
            <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a></span>
          </div></div><div class="post-info-line">
        <div class="post-info-md"><span><a href="/posts/como-usar-correo-electronico-para-firmarse-en-django/index.md" title="Leer Markdown" class="link-to-markdown">Leer Markdown</a></span></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="Compartir en Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/como-usar-correo-electronico-para-firmarse-en-django/" data-title="Como Usar Correo Electrónico En Vez Nombre De Usuario Para Firmarse en Django" data-via="@JorgeRS" data-hashtags="django,python,desarrollo"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="Compartir en Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/como-usar-correo-electronico-para-firmarse-en-django/" data-hashtag="django"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/django/" class="post-tag" title="Etiquetas - django">django</a><a href="/tags/python/" class="post-tag" title="Etiquetas - python">python</a><a href="/tags/desarrollo/" class="post-tag" title="Etiquetas - desarrollo">desarrollo</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/posts/que-es-appimage-y-como-usarla/" class="post-nav-item" rel="prev" title="Que Es AppImage Y Como Usarla"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Que Es AppImage Y Como Usarla</a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="Contenido"><h2 class="toc-title">Contenido&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">Provisto por <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.121.1"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> | Tema - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.0"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2024</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="Volver arriba"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning"></div>
  </noscript>
</div><link rel="preload" href="/lib/katex/katex.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/katex/katex.min.css"></noscript><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/katex/katex.min.js" defer></script><script src="/lib/katex/auto-render.min.js" defer></script><script src="/lib/katex/copy-tex.min.js" defer></script><script src="/lib/katex/mhchem.min.js" defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"De acuerdo","link":"Aprende más","message":"Este sitio web utiliza Cookies para mejorar su experiencia."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script src="/js/theme.min.js" defer></script></body>
</html>
